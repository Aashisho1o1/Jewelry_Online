<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Content Manager</title>
  </head>
  <body>
    <div id="cms-loader" style="font-family: Arial, sans-serif; padding: 24px; color: #444;">
      Loading content manager...
    </div>

    <script>
      (function () {
        const cmsLoader = document.getElementById('cms-loader');
        const sources = [
          'https://cdn.jsdelivr.net/npm/decap-cms@3.8.3/dist/decap-cms.js',
          'https://unpkg.com/decap-cms@3.8.3/dist/decap-cms.js',
        ];
        let index = 0;

        function onLoaded() {
          if (window.CMS) {
            if (cmsLoader) cmsLoader.remove();
            return;
          }
          loadNext();
        }

        function onFailed() {
          loadNext();
        }

        function showError() {
          if (!cmsLoader) return;
          cmsLoader.innerHTML =
            '<strong>Failed to load CMS assets.</strong><br/>' +
            'Try disabling ad/content blockers or refreshing the page.';
        }

        function loadNext() {
          if (index >= sources.length) {
            showError();
            return;
          }

          const src = sources[index++];
          const script = document.createElement('script');
          script.src = src;
          script.async = true;
          script.onload = onLoaded;
          script.onerror = onFailed;
          document.body.appendChild(script);
        }

        loadNext();
      })();
    </script>
  </body>
</html>
